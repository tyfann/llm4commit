
Instruction: Your task is to evaluate the commit messages based on the commit code diffs, so first look at the code diffs and determine what the code changes are, and you will be given 2 commit messages generated by different models for each commit. **You need to score each commit message from the following criteria from the perspectives of Conciseness, Expressiveness, and Informativeness, with a minimum score of 0 and a maximum score of 4. Finally, compare the two commit messages given for each commit and select the Best description number (1 or 2).**

Evaluation Criteria:
| Conciseness | Description                            |
| ----------- | -------------------------------------- |
| 0           | All of the information is unnecessary. |
| 1           | Has little necessary information.  |
| 2           | Has some necessary information.      |
| 3           | Has most necessary information.  |
| 4           | Has all necessary information.        |

| Expressiveness | Description                              |
| -------------- | ---------------------------------------- |
| 0              | Cannot read and understand.              |
| 1              | The content is difficult to read and understand.          |
| 2              | The content is somewhat readable and understandable. |
| 3              | The content is mostly readable and understandable.   |
| 4              | The content is very easy to read and understand.          |

| Informativeness | Description                                                  |
| --------------- | ------------------------------------------------------------ |
| 0               | No information about the code change is provided.             |
| 1               | Some crucial information is missing, making it hard to understand the code changes. |
| 2               | Some information is missing, but the missing parts are not essential for understanding the code changes. |
| 3               | There is some missing information, but none of it is necessary to understand the code changes. |
| 4               | All necessary information about the code change is included.                                 |
## Item 1

````diff
diff --git a/src/common/reducers/layout/index.js b/src/common/reducers/layout/index.js @@ -43,17 +43,10 @@ export function layout (state: State = initialState, action: Action): State {
}
switch (action.type) {
case APPLICATION_INIT:
- case UI_WINDOW_RESIZE: {
- const {innerWidth} = action.payload
- const {isMobile, isMobileSM, isMobileXS} = computeMobileStatuses(
- innerWidth
- )
+ case UI_WINDOW_RESIZE:
return {
...state,
- isMobile,
- isMobileSM,
- isMobileXS
- }
+ ...computeMobileStatuses(action.payload.innerWidth)
}
case UI_OPEN_SIDEBAR:
return {
````

1: 'fix: mobile status'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor(layout): simplify UI_WINDOW_RESIZE case in layout reducer'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 2

````diff
diff --git a/README.md b/README.md -# :warning: Doc Site Interruptions :warning:
-Our doc site DNS and CDN providers are having issues at the moment.
-
-**Please use https://semantic-org.github.io/Semantic-UI-React as a short-term fix.**
-Images will not load with this link, however, the majority of the docs will be usable.
-
-Thanks for your patience and help while we resolve these issues:
-- [CDN Issue #1404](https://github.com/Semantic-Org/Semantic-UI-React/issues/1404)
-- [DNS Issue #1429](https://github.com/Semantic-Org/Semantic-UI-React/issues/1429)
-
-***
<!-- Logo -->
<p align="center">
<a href="http://react.semantic-ui.com">
@@ -18,7 +7,7 @@ Thanks for your patience and help while we resolve these issues:
<!-- Name -->
<h1 align="center">
- <a href="https://semantic-org.github.io/Semantic-UI-React">Semantic UI React</a>
+ <a href="http://react.semantic-ui.com/">Semantic UI React</a>
</h1>
<!-- Badges -->
@@ -164,7 +153,7 @@ Big thanks to our [contributors][20], especially:
- @layershifter for bringing momentum and continual support
[1]: https://github.com/Semantic-Org/Semantic-UI-React/blob/master/.github/CONTRIBUTING.md
-[2]: https://semantic-org.github.io/Semantic-UI-React
+[2]: http://react.semantic-ui.com/
[3]: https://facebook.github.io/react/
[4]: https://github.com/Semantic-Org/Semantic-UI-React/labels/help%20wanted
[5]: http://semantic-ui.com/
````

1: 'docs: update homepage link to use HTTPS, Update the homepage link in the README.md file to use HTTPS instead of HTTP for Semantic UI React.'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'docs: update docs site links'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 3

````diff
diff --git a/.github/workflows/test.yml b/.github/workflows/test.yml @@ -22,18 +22,6 @@ jobs:
- name: Install Canvas and XML dependencies
run: sudo apt-get install -y libcairo2-dev libpango1.0-dev libxml2-utils
- - name: Get Yarn cache directory path
- id: yarn-cache-dir-path
- run: echo "::set-output name=dir::$(yarn cache dir)"
-
- - uses: actions/cache@v1
- id: yarn-cache # use this to check for `cache-hit` (`steps.yarn-cache.outputs.cache-hit != 'true'`)
- with:
- path: ${{ steps.yarn-cache-dir-path.outputs.dir }}
- key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}
- restore-keys: |
- ${{ runner.os }}-yarn-
-
- name: Setup Node ${{ matrix.node }}
uses: actions/setup-node@v1
with:
````

1: 'Remove yarn cache'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'ci(gh-actions): update yarn cache handling in test workflow'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 4

````diff
diff --git a/packages/chakra-ui-core/src/CAspectRatioBox/tests/CAspectRatioBox.test.js b/packages/chakra-ui-core/src/CAspectRatioBox/tests/CAspectRatioBox.test.js import { CAspectRatioBox, CBox } from '../..'
-import { render } from '@/tests/test-utils'
-
+import { render, screen } from '@/tests/test-utils'
const renderComponent = (props) => {
const inlineAttrs = (props && props.inlineAttrs) || ''
const base = {
@@ -15,17 +14,53 @@ const renderComponent = (props) => {
return render(base)
}
+/**
+ * Not sure if we need jest-emotion
+ *
+ * Get styles from document.styleSheets
+ * @param {String} selector
+ */
+function getElementStyles (selector) {
+ selector = new RegExp(selector)
+ let styles = []
+ let i; let j; let sel = selector
+ for (i = 0; i < document.styleSheets.length; ++i) {
+ for (j = 0; j < document.styleSheets[i].cssRules.length; ++j) {
+ if (sel.test(document.styleSheets[i].cssRules[j].selectorText)) {
+ // let selectorText = document.styleSheets[i].cssRules[j].selectorText
+ let cssText = document.styleSheets[i].cssRules[j].style.cssText
+ styles += cssText
+ }
+ }
+ }
+ return styles
+}
+
it('should render correctly', () => {
const inlineAttrs = ':ratio="1"'
const { asFragment } = renderComponent({ inlineAttrs })
expect(asFragment()).toMatchSnapshot()
+
+ const [, emotionClassName] = [...screen.getByTestId('aspectRatioBox').classList]
+ const pseudoStyles = getElementStyles(`.${emotionClassName}:before`)
+
+ expect(pseudoStyles).toContain(`
+ padding-bottom: 100%
+ `.trim())
})
-it('should have correct styles', () => {
- const inlineAttrs = ':ratio="2"'
- const { getByTestId } = renderComponent({ inlineAttrs })
- const image = getByTestId('image')
- const aspectRatioBox = getByTestId('aspectRatioBox')
+it('should have correct styles', async () => {
+ const inlineAttrs = `:ratio="2"`
+ renderComponent({ inlineAttrs })
+ const image = screen.getByTestId('image')
+ const aspectRatioBox = screen.getByTestId('aspectRatioBox')
+
+ const [, emotionClassName] = [...aspectRatioBox.classList]
+ const pseudoStyles = getElementStyles(`.${emotionClassName}:before`)
+
+ expect(pseudoStyles).toContain(`
+ padding-bottom: 50%
+ `.trim())
expect(aspectRatioBox).toHaveStyle(`
max-width: 400px;
@@ -40,7 +75,4 @@ it('should have correct styles', () => {
top: 0px;
left: 0px;
`)
-
- // TODO: we can't test pseudo elements.. so better test styles?
- // aspectRatioBox padding-bottom
})
````

1: 'Add tests for pseudo elements'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'test(CAspectRatioBox): update test cases for correct styles and rendering'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 5

````diff
diff --git a/src/Input.js b/src/Input.js @@ -27,6 +27,25 @@ const defaultProps = {
};
class Input extends React.Component {
+ constructor(props) {
+ super(props);
+ this.getRef = this.getRef.bind(this);
+ this.focus = this.focus.bind(this);
+ }
+
+ getRef(ref) {
+ if (this.props.innerRef) {
+ this.props.innerRef(ref);
+ }
+ this.ref = ref;
+ }
+
+ focus() {
+ if (this.ref) {
+ this.ref.focus();
+ }
+ }
+
render() {
let {
className,
````

1: 'Add ref and focus methods to Input'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'feat(input): add ref functionality to Input component'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 6

````diff
diff --git a/packages/razzle/config/babel-loader/razzle-babel-loader.js b/packages/razzle/config/babel-loader/razzle-babel-loader.js @@ -64,6 +64,7 @@ module.exports = babelLoader.custom(function(babel) {
isServer: opts.isServer,
isModern: opts.isModern,
hasModern: opts.hasModern,
+ supportsStaticESM: opts.supportsStaticESM,
development: opts.development,
shouldUseReactRefresh: opts.shouldUseReactRefresh,
};
@@ -101,6 +102,7 @@ module.exports = babelLoader.custom(function(babel) {
delete loader.distDir;
delete loader.isModern;
delete loader.hasModern;
+ delete loader.supportsStaticESM;
delete loader.development;
delete loader.shouldUseReactRefresh;
return { loader, custom };
@@ -112,6 +114,7 @@ module.exports = babelLoader.custom(function(babel) {
const isServer = customOptions.isServer;
const isModern = customOptions.isModern;
const hasModern = customOptions.hasModern;
+ const supportsStaticESM = customOptions.supportsStaticESM;
const development = customOptions.development;
const shouldUseReactRefresh = customOptions.shouldUseReactRefresh;
@@ -134,6 +137,7 @@ module.exports = babelLoader.custom(function(babel) {
presetOptions.caller.isServer = isServer;
presetOptions.caller.isModern = isModern;
presetOptions.caller.isDev = development;
+ presetOptions.caller.supportsStaticESM = supportsStaticESM;
const emitWarning = this.emitWarning.bind(this);
Object.defineProperty(presetOptions.caller, 'onWarning', {
````

1: 'refactor: remove supportsStaticESM option from babel loader config'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Add supportStaticESM to diff'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 7

````diff
diff --git a/src/features/tooltip/Tooltip.js b/src/features/tooltip/Tooltip.js @@ -14,11 +14,12 @@ class TooltipControls extends React.Component {
constructor(props){
super(props)
this.state = {
- title: "Title",
label:"Labels",
height:"200px",
width:"300px",
position: [200,200],
+ note: {
+ id:'',
note:{
title: '',
labels: [],
@@ -26,21 +27,32 @@ class TooltipControls extends React.Component {
}
}
}
+ }
handleChangeTitle = (event) => {
var note = {...this.state.note}
- note.title = event.target.value
+ note.note.title = event.target.value
this.setState({note});
}
handleChangeContent = (event) => {
var note = {...this.state.note}
- note.content = event.target.value
+ note.note.content = event.target.value
this.setState({note});
}
- saveNote = () => {
- console.log(this.state.note)
+ saveNote = async () => {
+ if(typeof (this.props.data.CRVIZ._SEARCH_KEY) !== 'undefined'){
+ var note = {...this.state.note}
+ note.id = await this.props.data.CRVIZ._SEARCH_KEY
+ this.setState({note});
+
+ this.props.addNote(this.state.note);
+ console.log(this.props.notes)
+ }
+ else{
+ console.log('else')
+ }
}
componentDidUpdate(prevProps) {
@@ -105,10 +117,10 @@ class TooltipControls extends React.Component {
}
<div>
<div>
- <b><h1><input style={inputStyle} type="text" value={this.state.note.title} onChange={this.handleChangeTitle} placeholder="Title"/></h1></b>
+ <b><h1><input style={inputStyle} type="text" value={this.state.note.note.title} onChange={this.handleChangeTitle} placeholder="Title"/></h1></b>
<h6>{this.state.label}</h6>
</div>
- <p><input style={inputStyle} type="text" value={this.state.note.content} onChange={this.handleChangeContent} placeholder="Take a note..."/></p>
+ <p><input style={inputStyle} type="text" value={this.state.note.note.content} onChange={this.handleChangeContent} placeholder="Take a note..."/></p>
<div >
<FontAwesomeIcon style={{margin:"10px"}} icon={faTags} />
<FontAwesomeIcon style={{color:"#47cf38", margin:"10px"}} icon={faSave} onClick={this.saveNote}/>
````

1: 'add note to tooltip'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'feat(tooltip): add note functionality and save feature'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 8

````diff
diff --git a/docs/src/routes.js b/docs/src/routes.js @@ -4,8 +4,8 @@ import { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom'
import ExternalExampleLayout from './components/ExternalExampleLayout'
import DocsLayout from './components/DocsLayout'
import DocsRoot from './components/DocsRoot'
-import LayoutsLayout from './components/layoutsLayout'
-import LayoutsRoot from './components/layoutsRoot'
+import LayoutsLayout from './components/LayoutsLayout'
+import LayoutsRoot from './components/LayoutsRoot'
import Introduction from './views/Introduction'
import Layouts from './views/layouts'
````

1: 'docs: Fix import paths for LayoutsLayout and LayoutsRoot, Updated import paths to match correct casing for components'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Fix typo in diff'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 9

````diff
diff --git a/packages/chakra-ui-core/src/CFormControl/tests/CFormControl.test.js b/packages/chakra-ui-core/src/CFormControl/tests/CFormControl.test.js import { CFormControl, CInput, CFormLabel } from '../..'
import { render } from '@/tests/test-utils'
-// mocks
-jest.mock('breadstick/dist/components/Alert/styles.css', () => ({})) // jest tries to import styles and fails...
-
const renderComponent = (props) => {
const inlineAttrs = (props && props.inlineAttrs) || ''
const base = {
````

1: 'Remove jest mock'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'test(CFormControl): remove unnecessary mock in CFormControl test file'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 10

````diff
diff --git a/website/pages/docs/customization.md b/website/pages/docs/customization.md @@ -12,7 +12,7 @@ module.exports = {
options: {
verbose: false, // set to true to get more info/error output
debug: {}, // debug flags
- buildType: 'iso', // or 'spa' and 'serverless'
+ buildType: 'iso', // or 'spa', 'serveronly', 'iso-serverless' and 'serveronly-serverless'
cssPrefix: 'static/css',
jsPrefix: 'static/js',
mediaPrefix: 'static/media',
````

1: 'docs: update buildType options in customization.md'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'docs: update buildType docs'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 11

````diff
diff --git a/js/src/util/focustrap.js b/js/src/util/focustrap.js @@ -20,7 +20,7 @@ const DefaultType = {
}
const NAME = 'focustrap'
-const DATA_KEY = 'bs.focustrap'
+const DATA_KEY = 'coreui.focustrap'
const EVENT_KEY = `.${DATA_KEY}`
const EVENT_FOCUSIN = `focusin${EVENT_KEY}`
const EVENT_KEYDOWN_TAB = `keydown.tab${EVENT_KEY}`
````

1: 'Fix focustrap data key'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'fix: update DATA_KEY to coreui.focustrap'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 12

````diff
diff --git a/packages/chakra-ui-core/src/CStat/tests/CStat.test.js b/packages/chakra-ui-core/src/CStat/tests/CStat.test.js import { CStat, CStatLabel, CStatNumber, CStatHelperText, CStatArrow } from '..'
-import { render, defaultProviders } from '@/tests/test-utils'
-import icons from '../../lib/internal-icons.js'
+import { render } from '@/tests/test-utils'
const renderComponent = (props) => {
const base = {
components: { CStat, CStatLabel, CStatNumber, CStatHelperText, CStatArrow },
- provide: () => defaultProviders({ $chakraIcons: { 'triangle-up': icons['triangle-up'], 'triangle-down': icons['triangle-down'] } }),
template: `
<CStat>
<CStatLabel>Collected Fees</CStatLabel>
````

1: 'Remove defaultProviders'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'test(CStat): update test setup in CStat.test.js'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 13

````diff
diff --git a/packages/putout/ChangeLog b/packages/putout/ChangeLog +2022.12.02, v28.1.0
+
+fix:
+- @putout/compare: __children -> __jsx_children
+
+feature:
+- package: @putout/cli-match v2.0.0
+- @putout/cli-match: drop support of node < 16
+- @putout/cli-match: change "match()" return signature: code -> {code, message}
+- @putout/plugin-remove-useless-spread: add support of sparse arrays (#119)
+- @putout/compare: __jsx_children: improve support
+- @putout/compare: improve support of jsx expressions
+- @putout/compare: improve __jsx_children support
+- @putout/compare: add support of JSXElement (#116)
+- @putout/engine-parser: template: add support of jsx
+- @putout/engine-runner: replacer: add support of jsx (#116)
+- @putout/compare: add support of JSXText (#116)
+- @putout/operate: extract: add support of JSXText (#116)
+- @putout/plugin-github: create-uses-fixer
+- @putout/plugin-github: add set-add-and-commit (EndBug/add-and-commit#448)
+- @putout/plugin-github: set-setup-node: set v3
+- @putout/plugin-nodejs: set-checkout-version: add support of actions/checkout v3
+
2022.10.30, v28.0.1
feature:
````

1: 'fix(compare): update variable name from __children to __jsx_children'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'add change log for v28.1.0'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 14

````diff
diff --git a/examples/with-typescript/src/server.tsx b/examples/with-typescript/src/server.tsx import express from 'express';
import React from 'react';
import { renderToString } from 'react-dom/server';
-import { StaticRouter, StaticRouterContext } from 'react-router-dom';
+import { StaticRouterContext } from "react-router";
+import { StaticRouter } from 'react-router-dom';
import App from './App';
````

1: 'fix: rearrange import order in server.tsx file'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Fix react-router import'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 15

````diff
diff --git a/examples/with-now-v2/README.md b/examples/with-now-v2/README.md @@ -44,6 +44,34 @@ Open the link written in the console.
Take a look at `now.json`. We are uploading the result of the razzle build, and setting up the routes for the app entry point and all static resources.
+```json
+{
+ "version": 2,
+ "name": "example",
+ "builds": [
+ {
+ "src": "build/public/**",
+ "use": "@now/static"
+ },
+ {
+ "src": "build/server.js",
+ "use": "@now/node-server"
+ }
+ ],
+ "routes": [
+ { "src": "/assets.json", "dest": "build/assets.json" },
+ { "src": "/favicon.ico", "dest": "build/public/favicon.ico" },
+ { "src": "/robots.txt", "dest": "build/public/robots.txt" },
+ { "src": "/static/(.*)", "dest": "build/public/static/$1" },
+ { "src": "/(.*)", "dest": "build/server.js" }
+
+ ],
+ "env": {
+ "NODE_ENV": "production"
+ }
+}
+```
+
We are also setting the `NODE_ENV` environment variable. Most likely, your app will use other environment variables, beware you should not commit secrets like api keys and others into your repository. Take a look at now's documentation to understand what you should do in such cases.
## Documentation
````

1: 'docs(readme): update now.json configuration in README for with-now-v2 example'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'add code block to now.json'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 16

````diff
diff --git a/packages/wmr/src/build.js b/packages/wmr/src/build.js @@ -18,7 +18,13 @@ export default async function build(options = {}) {
options = await normalizeOptions(options, 'build');
- await fs.rmdir(options.out, { recursive: true });
+ // Clears out the output folder without deleting it -- useful
+ // when mounted with Docker and the like
+ (await fs.readdir(options.out)).forEach(async item => {
+ item = path.join(options.out, item);
+ if ((await fs.stat(item)).isFile()) await fs.unlink(item);
+ else await fs.rmdir(item, { recursive: true });
+ });
const bundleOutput = await bundleProd(options);
````

1: 'refactor: improve output folder clearing logic in build process'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'fix(wmr): remove output folder when mounted with Docker'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 17

````diff
diff --git a/lib/monitor/run.js b/lib/monitor/run.js @@ -195,7 +195,7 @@ function run(options) {
if (signal === config.signal || code === 0) {
// this was a clean exit, so emit exit, rather than crash
debug('bus.emit(exit) via ' + config.signal);
- bus.emit('exit');
+ bus.emit('exit', signal);
// exit the monitor, but do it gracefully
if (signal === config.signal) {
````

1: 'fix(monitor): emit signal on exit'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor(monitor): Update exit event emission in run function'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 18

````diff
diff --git a/package.json b/package.json "scripts": {
"install": "lerna bootstrap --hoist",
"clean:lerna": "lerna clean",
- "clean:dist": "sh scripts/clean-all",
- "build": "sh scripts/build-all",
+ "clean:dist": "bash scripts/clean-all",
+ "build": "bash scripts/build-all",
"build:examples": "cd packages/examples && npm run build",
"examples": "cd packages/examples && npm run serve",
- "build:test": "sh scripts/build-test",
- "build:coverage": "COVERAGE=1 sh scripts/build-test",
- "test:unit": "sh scripts/run-test",
+ "build:test": "bash scripts/build-test",
+ "build:coverage": "COVERAGE=1 bash scripts/build-test",
+ "test:unit": "bash scripts/run-test",
"test:image": "cd packages/examples && npm test",
- "test:coverage": "COVERAGE=1 sh scripts/run-test",
+ "test:coverage": "COVERAGE=1 bash scripts/run-test",
"coverage:report": "http-server build/coverage/html -p ${PORT-3000}",
"build:docs": "sphinx-build -a -b html docs/ build/docs/",
- "lint": "sh scripts/run-lint",
+ "lint": "bash scripts/run-lint",
"lint:pycandela": "flake8 --config python/pycandela/flake8.cfg python/pycandela",
"docs": "http-server build/docs -p ${PORT-3000}",
"commit": "git-cz",
````

1: 'chore: update build and test scripts to use bash instead of sh'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'chore: use bash instead of sh'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 19

````diff
diff --git a/circle.yml b/circle.yml @@ -16,10 +16,8 @@ dependencies:
compile:
override:
- # Build Candela and "install" it as a node module.
+ # Build Candela.
- npm run build
- - rm -rf node_modules/candela
- - npm install
# Build the examples.
- npm run build:examples
````

1: 'chore(circle): updating build process in circle.yml'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Remove unnecessary node_modules/candela'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 20

````diff
diff --git a/website/pages/deployment-options/azure.md b/website/pages/deployment-options/azure.md @@ -98,23 +98,41 @@ Deploy the Razzle project to Azure
webappname=myRazzle$RANDOM
# Create a resource group.
-az group create --location westeurope --name myResourceGroup
+az group create \
+ --location westeurope \
+ --name myResourceGroup
# Create an App Service plan in `FREE` tier.
-az appservice plan create --name myAppServicePlan --resource-group myResourceGroup --sku FREE --is-linux
+az appservice plan create --name myAppServicePlan \
+ --resource-group myResourceGroup \
+ --sku FREE \
+ --is-linux
# Create a web app.
-az webapp create --name $webappname --resource-group myResourceGroup --plan myAppServicePlan --runtime "node|12-lts"
+az webapp create \
+ --name $webappname \
+ --resource-group myResourceGroup \
+ --plan myAppServicePlan \
+ --runtime "node|12-lts"
# Enable building with zip deploy
-az webapp config appsettings set --name $webappname --resource-group myResourceGroup --settings SCM_DO_BUILD_DURING_DEPLOYMENT=true
-
-# Get FTP publishing profile and query for publish URL and credentials
-creds=($(az webapp deployment list-publishing-profiles --name $webappname --resource-group myResourceGroup \
---query "[?contains(publishMethod, 'ZipDeploy')].[publishUrl,userName,userPWD]" --output tsv))
+az webapp config appsettings set \
+ --name $webappname \
+ --resource-group myResourceGroup \
+ --settings SCM_DO_BUILD_DURING_DEPLOYMENT=true
+
+# Get ZipDeploy publishing profile and query for publish URL and credentials
+creds=($(az webapp deployment list-publishing-profiles \
+ --name $webappname \
+ --resource-group myResourceGroup \
+ --query "[?contains(publishMethod, 'ZipDeploy')].[publishUrl,userName,userPWD]" \
+ --output tsv))
# Use cURL to perform http zip upload. You can use any http tool to do this instead.
-curl -X POST -u ${creds[1]}:${creds[2]} --data-binary @"site.zip" https://${creds[0]}/api/zipdeploy
+curl -X POST \
+ -u ${creds[1]}:${creds[2]} \
+ --data-binary @"site.zip" \
+ https://${creds[0]}/api/zipdeploy
# Copy the result of the following command into a browser to see the static HTML site.
echo https://$webappname.azurewebsites.net
````

1: 'website(deployment-options): improve readability and formatting of Azure deployment commands'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Fixing formatting issues in Azure deployment options'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 21

````diff
diff --git a/app/mixins/parent-name.js b/app/mixins/parent-name.js @@ -9,6 +9,6 @@ export default Mixin.create({
parentName: computed('routeName', function() {
const routeName = this.get('routeName');
const routes = routeName.split('.');
- return routes.slice(0, 2).join('.');
+ return routes.slice(0, 3).join('.');
})
});
````

1: 'Fix route name length'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor(mixins): update parentName logic to include one more level in route hierarchy'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 22

````diff
diff --git a/packages/chakra-ui-core/src/CCircularProgress/tests/__snapshots__/CCircularProgress.test.js.snap b/packages/chakra-ui-core/src/CCircularProgress/tests/__snapshots__/CCircularProgress.test.js.snap @@ -6,7 +6,7 @@ exports[`should render correctly 1`] = `
aria-valuemax="100"
aria-valuemin="0"
aria-valuenow="40"
- class="css-xqz7ss"
+ class="css-12d21aj"
data-chakra-component="CBox"
data-testid="CircularProgress"
role="progressbar"
@@ -27,7 +27,7 @@ exports[`should render correctly 1`] = `
stroke-width="11.111111111111112"
/>
<circle
- class="css-1h10kks"
+ class="css-19r75gt"
cx="111.11111111111111"
cy="111.11111111111111"
data-chakra-component="CBox"
````

1: 'Update CBox styles'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'fix: update class names in CCircularProgress test snapshots'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 23

````diff
diff --git a/packages/razzle-dev-utils/makeLoaderFinder.js b/packages/razzle-dev-utils/makeLoaderFinder.js @@ -6,7 +6,7 @@ const makeLoaderFinder = loaderName => rule => {
// Checks if there's a loader string in rule.loader matching loaderRegex.
const inLoaderString =
- typeof rule.loader === 'string' && rule.loader.match(loaderRegex);
+ typeof rule.loader === 'string' && (rule.loader.match(loaderRegex) || rule.loader === loaderName);
// Checks if there is an object inside rule.use with loader matching loaderRegex, OR
// Checks another condition, if rule is not an object, but pure string (ex: "style-loader", etc)
@@ -15,8 +15,8 @@ const makeLoaderFinder = loaderName => rule => {
rule.use.find(
loader =>
(typeof loader.loader === 'string' &&
- loader.loader.match(loaderRegex)) ||
- (typeof loader === 'string' && loader.match(loaderRegex))
+ (loader.loader.match(loaderRegex)) || rule.loader === loaderName) ||
+ (typeof loader === 'string' && (loader.match(loaderRegex) || loader === loaderName))
);
return inUseArray || inLoaderString;
````

1: 'Fix loader name matching'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor: improve loader finder logic'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 24

````diff
diff --git a/src/system/interpreter.js b/src/system/interpreter.js @@ -103,8 +103,8 @@ BiwaScheme.Interpreter = BiwaScheme.Class.create({
// m: number of items to shift
// s: stack pointer (= index of stack top + 1)
shift_args: function(n, m, s){
- for(var i = n-1; i >= -1; i--){
- this.index_set(s, i+m+1, this.index(s, i+1));
+ for(var i = n; i >= 0; i--){
+ this.index_set(s, i+m+1, this.index(s, i));
}
return s-m-1;
},
@@ -115,7 +115,7 @@ BiwaScheme.Interpreter = BiwaScheme.Class.create({
// private
index_set: function(s, i, v){
- this.stack[s-i-2] = v;
+ this.stack[(s-1)-i] = v;
},
// private
@@ -211,7 +211,7 @@ BiwaScheme.Interpreter = BiwaScheme.Class.create({
break;
case "box":
var n=x[1], x=x[2];
- this.index_set(s, n, [this.index(s, n+1)]); //boxing
+ this.index_set(s, n+1, [this.index(s, n+1)]); //boxing
break;
case "test":
var thenc=x[1], elsec=x[2];
@@ -305,14 +305,14 @@ BiwaScheme.Interpreter = BiwaScheme.Class.create({
// In such case this VM prepares an empty list as the rest argument.
// --------------------------------------------------------------
// => We extend the stack to put the empty list.
- for(var i = -1; i < n_args; i++){
- this.index_set(s, i-1, this.index(s, i+1));
+ for(var i = 0; i < n_args+1; i++){
+ this.index_set(s, i-1, this.index(s, i));
}
s++;
// => Update the number of arguments
- this.index_set(s, -1, this.index(s, 0) + 1);
+ this.index_set(s, 0, this.index(s, 0) + 1);
}
- this.index_set(s, dotpos, ls);
+ this.index_set(s, dotpos+1, ls);
}
else {
// the dot is not found
````

1: 'fix index_set'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor: fix index_set function in interpreter'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 25

````diff
diff --git a/.circleci/config.yml b/.circleci/config.yml @@ -166,6 +166,7 @@ jobs:
fi
else
echo 'export DOCKER_IMAGE_TAGS=($CIRCLE_TAG latest)' >> $BASH_ENV
+ echo 'export DOCKER_BUILD_DEPRECATED="true"' >> $BASH_ENV
fi
- run:
name: Download and import signing key
@@ -205,7 +206,9 @@ jobs:
for tag in "${DOCKER_IMAGE_TAGS[@]}"; do
docker tag offen/offen:local offen/offen:$tag
+ if [ ! -z "$DOCKER_BUILD_DEPRECATED" ]; then
docker tag offen/offen:root offen/offen:$tag-root
+ fi
done
- run:
name: Push offen/offen to Docker Hub
@@ -213,7 +216,9 @@ jobs:
echo "$DOCKER_ACCESSTOKEN" | docker login --username $DOCKER_LOGIN --password-stdin
for tag in "${DOCKER_IMAGE_TAGS[@]}"; do
docker push offen/offen:$tag
+ if [ ! -z "$DOCKER_BUILD_DEPRECATED" ]; then
docker push offen/offen:$tag-root
+ fi
done
- store_artifacts:
path: /tmp/artifacts
````

1: 'chore: add deprecated flag for docker build process'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Add DOCKER_BUILD_DEPRECATED env var'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 26

````diff
diff --git a/docs/app/Components/ComponentDoc/ComponentExample.js b/docs/app/Components/ComponentDoc/ComponentExample.js @@ -138,7 +138,7 @@ class ComponentExample extends Component {
resetJSX = () => {
const { sourceCode } = this.state
const original = this.getOriginalSourceCode()
- if (sourceCode !== original && confirm('Loose your changes?')) { // eslint-disable-line no-alert
+ if (sourceCode !== original && confirm('Lose your changes?')) { // eslint-disable-line no-alert
this.setState({ sourceCode: original })
this.renderSourceCode()
}
````

1: 'Fix eslint error in resetJSX'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'style(docs): corrected spelling mistake in confirmation message'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 27

````diff
diff --git a/docs/lib/Components/ModalsPage.js b/docs/lib/Components/ModalsPage.js @@ -104,7 +104,9 @@ const ModalsPage = () => {
modalTransition: PropTypes.shape(Fade.propTypes),
innerRef: PropTypes.object,
// if modal should be destructed/removed from DOM after closing
- unmountOnClose: PropTypes.bool // defaults to true
+ unmountOnClose: PropTypes.bool, // defaults to true
+ // if the element which triggered the modal to open should focused after the modal closes (see example somewhere below)
+ returnFocusAfterClose: PropTypes.bool // defaults to true
}`}
</PrismCode>
</pre>
````

1: 'Add returnFocusAfterClose prop to ModalsPage'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'docs(ModalsPage): Added `returnFocusAfterClose` prop'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 28

````diff
diff --git a/components/SimilarityGraph/index.js b/components/SimilarityGraph/index.js @@ -109,7 +109,7 @@ export default class SimilarityGraph extends VisComponent {
.attr('x1', d => d.source.x)
.attr('y1', d => d.source.y)
.attr('x2', d => d.target.x)
- .attr('y2', d => d.target.y)
+ .attr('y2', d => d.target.y);
});
this.cola.avoidOverlaps(true)
````

1: 'fix(SimilarityGraph): add missing semicolon to y2 attribute definition'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'fix: add missing semicolon'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 29

````diff
diff --git a/packages/menu/Menu.vue b/packages/menu/Menu.vue @@ -4,7 +4,6 @@ import { addClass, removeClass, hasClass } from 'element-ui/src/utils/dom';
import { computed, getCurrentInstance, onMounted, provide, ref, toRefs, watch, h , Transition } from 'vue';
import {useEmitter} from 'element-ui/src/use/emitter';
import {useItems} from "./src/menu-use";
-import { Submenu } from '../../types';
export default {
name: 'ElMenu',
componentName: 'ElMenu',
````

1: 'fix: remove unused import'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor: Remove unnecessary import in Menu.vue'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 30

````diff
diff --git a/src/jscad/includeJscadSync.js b/src/jscad/includeJscadSync.js @@ -25,8 +25,6 @@ export default function includeJscadSync (relpath, fn, memFs) {
xhr.open('GET', url, false)
xhr.onload = function () {
var src = this.responseText
- //console.log('src',src)
- //eval(src) // UGH ???
resolve(src)
}
xhr.onerror = (err) => reject(err)
````

1: 'refactor: remove unnecessary console.log and eval statements in includeJscadSync function'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'remove commented code and remove unused code'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 31

````diff
diff --git a/lib/config/load.js b/lib/config/load.js @@ -69,6 +69,9 @@ function load(settings, options, config, callback) {
if (!options.script && !options.exec) {
var found = findAppScript();
if (found) {
+ if (!options.args) {
+ options.args = [];
+ }
// if the script is found as a result of not being on the command
// line, then we move any of the pre double-dash args in execArgs
const n = options.scriptPosition || options.args.length;
````

1: 'fix(config): add default value for options.args in load function'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'fix: add default args to options if not set'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 32

````diff
diff --git a/lib/monitor/run.js b/lib/monitor/run.js @@ -133,6 +133,12 @@ function run(options) {
bus.stdout = child.stdout;
bus.stderr = child.stderr;
}
+
+ if (shouldFork) {
+ child.on('message', function (message, sendHandle) {
+ bus.emit('message', message, sendHandle);
+ });
+ }
}
bus.emit('start');
````

1: 'feat: add message event listener for child process communication'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Emit message event when forking'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 33

````diff
diff --git a/src/features/visualization/Visualization.module.css b/src/features/visualization/Visualization.module.css -webkit-animation-name: delta;
-webkit-animation-duration: 2s;
-webkit-animation-iteration-count: infinite;
- animation: delta 5s infinite;
+ animation: delta 2s infinite;
}
@keyframes delta {
- 0% {
+ 50% {
-webkit-clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
},
- 100% {
+ 0%, 100% {
}
}
-webkit-animation-name: plus;
-webkit-animation-duration: 2s;
-webkit-animation-iteration-count: infinite;
- animation: plus 5s infinite;
+ animation: plus 2s infinite;
}
@keyframes plus {
- 0% {
+ 50% {
-webkit-clip-path: polygon(0% 33%, 33% 33%, 33% 0%, 66% 0%, 66% 33%, 100% 33%, 100% 66%, 66% 66%, 66% 100%, 33% 100%, 33% 66%, 0% 66%, 0% 33%);
clip-path: polygon(0% 33%, 33% 33%, 33% 0%, 66% 0%, 66% 33%, 100% 33%, 100% 66%, 66% 66%, 66% 100%, 33% 100%, 33% 66%, 0% 66%, 0% 33%);
},
- 100% {
+ 0%, 100% {
}
}
-webkit-animation-name: minus;
-webkit-animation-duration: 2s;
-webkit-animation-iteration-count: infinite;
- animation: minus 5s infinite;
+ animation: minus 2s infinite;
}
@keyframes minus {
- 0% {
+ 50% {
-webkit-clip-path: polygon(0% 33%, 100% 33%, 100% 66%, 0% 66%);
clip-path: polygon(0% 33%, 100% 33%, 100% 66%, 0% 66%);
},
- 100% {
+ 0%, 100% {
}
}
````

1: 'chore(visualization): Improved animation duration for delta, plus, and minus animations'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Update visualization diff'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 34

````diff
diff --git a/bin/postinstall.js b/bin/postinstall.js @@ -5,6 +5,8 @@ function main() {
return;
}
+ const message = '\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n';
+
try {
const Configstore = require('configstore');
const pkg = require(__dirname + '/../package.json');
@@ -18,11 +20,11 @@ function main() {
const last = conf.get('lastCheck');
if (!last || now - week > last) {
- console.log('\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n');
+ console.log(message);
conf.set('lastCheck', now);
}
} catch (e) {
- console.log('\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n');
+ console.log(message);
}
}
````

1: 'fix: donate message'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'chore: update support message in postinstall script'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 35

````diff
diff --git a/src/PopperContent.js b/src/PopperContent.js @@ -151,8 +151,8 @@ class PopperContent extends React.Component {
modifiers={extendedModifiers}
placement={placement}
>
- {({ ref, style, placement, arrowProps }) => (
- <div ref={ref} style={style} className={popperClassName} x-placement={placement}>
+ {({ ref, style, placement, outOfBoundaries, arrowProps }) => (
+ <div ref={ref} style={style} className={popperClassName} x-placement={placement} x-out-of-boundaries={outOfBoundaries ? 'true' : undefined}>
{children}
{!hideArrow && <span ref={arrowProps.ref} className={arrowClassName} style={arrowProps.style} />}
</div>
````

1: 'Add outOfBoundaries prop to PopperContent'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor: Update PopperContent component to include outOfBoundaries prop in div attributes'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 36

````diff
diff --git a/examples/demo/public/index.tsx b/examples/demo/public/index.tsx @@ -7,10 +7,12 @@ import Header from './header.tsx';
const sleep = t => new Promise(r => setTimeout(r, t));
+const IS_CLIENT = typeof window !== 'undefined';
+
const About = lazy(() => import('./pages/about/index.js'));
-const LazyAndLate = lazy(async () => (await sleep(1500), import('./pages/about/index.js')));
+const LazyAndLate = lazy(async () => (IS_CLIENT && (await sleep(1500)), import('./pages/about/index.js')));
const CompatPage = lazy(() => import('./pages/compat.js'));
-const ClassFields = lazy(async () => (await sleep(1500), import('./pages/class-fields.js')));
+const ClassFields = lazy(async () => (IS_CLIENT && (await sleep(1500)), import('./pages/class-fields.js')));
const Files = lazy(() => import('./pages/files/index.js'));
const Environment = lazy(async () => (await import('./pages/environment/index.js')).Environment);
const JSONView = lazy(async () => (await import('./pages/json.js')).JSONView);
````

1: 'fix: only sleep when client'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor: optimize lazy loading logic with client-side check'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 37

````diff
diff --git a/package.json b/package.json "build:docs-toc": "doctoc ./.github/CONTRIBUTING.md --github --maxlevel 4",
"build:docs-cname": "echo react.semantic-ui.com > docs/build/CNAME",
"build:changelog": "github_changelog_generator --no-issues --no-unreleased --release-branch master --since-tag $(git describe --abbrev=0 --tags $(git rev-parse HEAD~400))",
+ "deploy:changelog": "git add CHANGELOG.md && git commit -m 'docs(changelog): update changelog [ci skip]' && git push",
"predeploy:docs": "cross-env NODE_ENV=production yarn build:docs && yarn build:docs-cname",
"deploy:docs": "gh-pages -d docs/build -m 'deploy docs [ci skip]'",
+ "postdeploy:docs": "yarn build:changelog && yarn deploy:changelog",
"lint": "cross-env NODE_ENV=production eslint .",
"lint:fix": "yarn lint --fix",
"prettier": "prettier --list-different \"**/*.{js,jsx,ts,tsx}\"",
````

1: 'feat(deploy): add automated changelog deployment process'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'docs(changelog): update changelog after docs build'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 38

````diff
diff --git a/package.json b/package.json {
"name": "@nuxtjs/firebase",
- "version": "5.0.7",
+ "version": "5.1.0",
"description": "Intergrate Firebase into your Nuxt project.",
"keywords": [
"firebase",
"cz-conventional-changelog": "latest",
"eslint": "latest",
"firebase": "^7.14.2",
- "husky": "latest",
+ "husky": "^4.2.5",
"jest": "^25.5.3",
"standard-version": "latest",
"vuepress": "^1.4.1",
````

1: 'chore(release): 5.1.0'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'chore(deps): update husky version to ^4.2.5'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 39

````diff
diff --git a/test/specs/modules/Checkbox/Checkbox-test.js b/test/specs/modules/Checkbox/Checkbox-test.js @@ -53,7 +53,7 @@ describe('Checkbox', () => {
})
describe('aria', () => {
- ['aria-label', 'role'].forEach((propName) => {
+ ;['aria-label', 'role'].forEach((propName) => {
it(`passes "${propName}" to the <input>`, () => {
shallow(<Checkbox {...{ [propName]: 'foo' }} />)
.find('input')
@@ -377,36 +377,30 @@ describe('Checkbox', () => {
description: 'click on label: fires on mouse click',
events: {
label: ['mouseup', 'click'],
- input: ['click'],
},
},
{
description: 'click on input: fires on mouse click',
events: {
- label: ['mouseup', 'click'],
input: ['click'],
},
},
{
description: 'key on input: fires on space key',
events: {
- label: ['mouseup', 'click'],
input: ['click'],
},
},
-
{
description: 'click on label with "id": fires on mouse click',
events: {
label: ['mouseup', 'click'],
- input: ['click'],
},
id: 'foo',
},
{
description: 'click on input with "id": fires on mouse click',
events: {
- label: ['mouseup', 'click'],
input: ['click'],
},
id: 'foo',
@@ -435,8 +429,10 @@ describe('Checkbox', () => {
{ attachTo },
)
- _.forEach(events, (event, target) => {
- domEvent.fire(`[data-id=${dataId}] ${target}`, event)
+ _.forEach(events, (targetEvents, target) => {
+ _.forEach(targetEvents, (targetEvent) => {
+ domEvent.fire(`[data-id=${dataId}] ${target}`, targetEvent)
+ })
})
onClick.should.have.been.calledOnce()
@@ -449,10 +445,10 @@ describe('Checkbox', () => {
})
describe('Controlled component', () => {
- const getControlledCheckbox = isOnClick =>
+ const getControlledCheckbox = (isOnClick) =>
class ControlledCheckbox extends React.Component {
state = { checked: false }
- toggle = () => this.setState(prevState => ({ checked: !prevState.checked }))
+ toggle = () => this.setState((prevState) => ({ checked: !prevState.checked }))
render() {
const handler = isOnClick ? { onClick: this.toggle } : { onChange: this.toggle }
````

1: 'test(core-checkbox): refactor event handling logic in Checkbox-test.js'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Fix checkbox tests'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 40

````diff
diff --git a/README.md b/README.md @@ -123,7 +123,7 @@ export default async function (config) {
}
if (config.mode === 'serve') {
- options.middleware.push(
+ config.middleware.push(
// add any Polka middleware:
function myPolkaMiddleware(req, res, next) {
res.setHeader('X-Foo', 'bar');
````

1: 'docs(README): update comment for `middleware` usage'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'docs: fix typo in config.middleware.push'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 41

````diff
diff --git a/docs/src/examples/modules/Search/Types/SearchExampleStandardCustom.js b/docs/src/examples/modules/Search/Types/SearchExampleStandardCustom.js -import PropTypes from 'prop-types'
import _ from 'lodash'
import faker from 'faker'
-import React, { Component } from 'react'
+import React from 'react'
import { Search, Grid, Header, Segment, Label } from 'semantic-ui-react'
const source = _.times(5, () => ({
@@ -11,58 +10,80 @@ const source = _.times(5, () => ({
price: faker.finance.amount(0, 100, 2, '$'),
}))
-const resultRenderer = ({ title }) => <Label content={title} />
-
-resultRenderer.propTypes = {
- title: PropTypes.string,
- description: PropTypes.string,
+const initialState = {
+ loading: false,
+ results: [],
+ value: '',
}
-const initialState = { isLoading: false, results: [], value: '' }
+function exampleReducer(state, action) {
+ switch (action.type) {
+ case 'CLEAN_QUERY':
+ return initialState
+ case 'START_SEARCH':
+ return { ...state, loading: true, value: action.query }
+ case 'FINISH_SEARCH':
+ return { ...state, loading: false, results: action.results }
+ case 'UPDATE_SELECTION':
+ return { ...state, value: action.selection }
-export default class SearchExampleStandard extends Component {
- state = initialState
+ default:
+ throw new Error()
+ }
+}
- handleResultSelect = (e, { result }) => this.setState({ value: result.title })
+const resultRenderer = ({ title }) => <Label content={title} />
+
+function SearchExampleStandardCustom() {
+ const [state, dispatch] = React.useReducer(exampleReducer, initialState)
+ const { loading, results, value } = state
- handleSearchChange = (e, { value }) => {
- this.setState({ isLoading: true, value })
+ const timeoutRef = React.useRef()
+ const handleSearchChange = React.useCallback((e, data) => {
+ clearTimeout(timeoutRef.current)
+ dispatch({ type: 'START_SEARCH', query: data.value })
- setTimeout(() => {
- if (this.state.value.length < 1) return this.setState(initialState)
+ timeoutRef.current = setTimeout(() => {
+ if (data.value.length === 0) {
+ dispatch({ type: 'CLEAN_QUERY' })
+ return
+ }
- const re = new RegExp(_.escapeRegExp(this.state.value), 'i')
+ const re = new RegExp(_.escapeRegExp(data.value), 'i')
const isMatch = (result) => re.test(result.title)
- this.setState({
- isLoading: false,
+ dispatch({
+ type: 'FINISH_SEARCH',
results: _.filter(source, isMatch),
})
}, 300)
+ }, [])
+ React.useEffect(() => {
+ return () => {
+ clearTimeout(timeoutRef.current)
}
-
- render() {
- const { isLoading, value, results } = this.state
+ }, [])
return (
<Grid>
<Grid.Column width={6}>
<Search
- loading={isLoading}
- onResultSelect={this.handleResultSelect}
- onSearchChange={_.debounce(this.handleSearchChange, 500, {
- leading: true,
- })}
+ loading={loading}
+ onResultSelect={(e, data) =>
+ dispatch({ type: 'UPDATE_SELECTION', selection: data.result.title })
+ }
+ onSearchChange={handleSearchChange}
+ resultRenderer={resultRenderer}
results={results}
value={value}
- resultRenderer={resultRenderer}
/>
</Grid.Column>
+
<Grid.Column width={10}>
<Segment>
<Header>State</Header>
<pre style={{ overflowX: 'auto' }}>
- {JSON.stringify(this.state, null, 2)}
+ {JSON.stringify({ loading, results, value }, null, 2)}
</pre>
<Header>Options</Header>
<pre style={{ overflowX: 'auto' }}>
@@ -73,4 +94,5 @@ export default class SearchExampleStandard extends Component {
</Grid>
)
}
-}
+
+export default SearchExampleStandardCustom
````

1: 'refactor(search): optimize search functionality and state management'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'docs(Search): update custom example'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 42

````diff
diff --git a/src/connection.js b/src/connection.js import d from 'debug';
+import values from 'lodash/values';
import WebSocketPlus, {
OPEN,
DISCONNECT,
@@ -59,7 +60,7 @@ export default class Connection extends WebSocketPlus {
if (waitingForRespond) {
if (isIdempotentCommand(command)) {
buffer = command.toArrayBuffer();
- const duplicatedCommand = Object.values(this._commands).find(
+ const duplicatedCommand = values(this._commands).find(
({ buffer: targetBuffer, command: targetCommand }) =>
targetCommand.cmd === command.cmd &&
targetCommand.op === command.op &&
````

1: 'fix: use lodash values instead of Object.values'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'fix: replace Object.values with lodash values in Connection class'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 43

````diff
diff --git a/lib/nodemon.js b/lib/nodemon.js @@ -180,8 +180,16 @@ function nodemon(settings) {
}).filter(Boolean).join(' ');
if (ignoring) utils.log.detail('ignoring: ' + ignoring);
- utils.log.info('watching: ' + config.options.monitor.map(function (rule) {
- return rule.slice(0, 1) !== '!' ? rule : false;
+ utils.log.info('watching dir(s): ' + config.options.monitor.map(function (rule) {
+ if (rule.slice(0, 1) !== '!') {
+ try {
+ rule = path.relative(process.cwd(), rule);
+ } catch (e) {}
+
+ return rule;
+ }
+
+ return false;
}).filter(Boolean).join(' '));
utils.log.detail('watching extensions: ' + (config.options.execOptions.ext || '(all)'));
````

1: 'fix: watch dir(s)'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'feat: Update log message to include watching directories in nodemon settings'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 44

````diff
diff --git a/src/common/api/LocalStorageCookiesSvc/index.js b/src/common/api/LocalStorageCookiesSvc/index.js // @flow
import * as store from 'store2'
import Cookies from 'js-cookie'
+import decodeJWT from 'jwt-decode'
export const JWT_TOKEN = 'JWT_TOKEN'
@@ -18,4 +19,9 @@ export function setLocalToken (token: string) {
Cookies.set(JWT_TOKEN, token, {expires: 365})
}
+export function getInfoFromJWT () {
+ const token = getLocalToken()
+ return decodeJWT(token)
+}
+
export const isLoggedIn = () => !!getLocalToken()
````

1: 'Add getInfoFromJWT'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'feat: add getInfoFromJWT function to retrieve information from JWT token'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 45

````diff
diff --git a/docs/src/examples/collections/Menu/Content/MenuExampleHeaderVertical.js b/docs/src/examples/collections/Menu/Content/MenuExampleHeaderVertical.js @@ -3,7 +3,7 @@ import { Menu } from 'semantic-ui-react'
export default class MenuExampleHeaderVertical extends Component {
state = {}
- handleItemClick = (name) => this.setState({ activeItem: name })
+ handleItemClick = (e, { name }) => this.setState({ activeItem: name });
render() {
const { activeItem } = this.state
````

1: 'docs(menu): update handleItemClick function in MenuExampleHeaderVertical'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'fix(docs): fix menu example'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 46

````diff
diff --git a/docs/content/en/service-options/auth.md b/docs/content/en/service-options/auth.md @@ -118,6 +118,14 @@ The injected user can be used by context aware life cycle hooks on the server si
A tutorial on how to set this up can be found [here](/tutorials/ssr).
+<alert type="info">
+<p><b>Please Note:</b></p>
+<p>This <u>does not authenticate the Firebase instance on the server</u>. While you will be able to know if a user is logged in or not and have access to its simplified properties, you <u>won't be able to do authenticated calls</u> on server-side.</p><br>
+<p>This means that all calls on server-side (e.g. fetching data via Firestore in fetch-hooks), which are protected by security rules, will still fail with <i>insufficient privileges.</i></p>
+<br>
+<p>Reason for this is that the Firebase JS SDK is a client-side library that is not built for authenticating multiple users. See the <nuxt-link to="/service-options/auth#serverlogin">serverLogin</nuxt-link> option for an <b>experimental</b> approach to solve this issue.</p>
+</alert>
+
### ignorePaths
The service worker session automatically ignores external resources, static files and HMR calls.
````

1: 'docs: Add note about Firebase authentication limitations on the server side'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'Add note about server-side authentication'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 47

````diff
diff --git a/src/common/app/configure_app.js b/src/common/app/configure_app.js @@ -4,10 +4,10 @@ import thunk from 'redux-thunk'
import {autoRehydrate} from 'redux-persist'
import {createStore, applyMiddleware, compose} from 'redux'
import {routerMiddleware} from 'react-router-redux'
-// Application
+// // Application
import rootReducer from 'reducers'
-import {routes, history} from 'routing'
-
+import {history, routes} from 'routing'
+//
/**
* Configure application store with middlewares.
* @param {Object} initialState - preloadedState
@@ -18,7 +18,7 @@ const configureStore = (initialState: Object) => {
const middlewares = [thunk, routerMiddleware(history)]
const appliedMiddlewares = middlewares.map(a => applyMiddleware(a))
const enhancers = [rehydrate].concat(appliedMiddlewares)
- //
+
const getComposeFunc = () => {
if (process.env.NODE_ENV === 'development') {
const {composeWithDevTools} = require('redux-devtools-extension')
````

1: 'fix: linting errors'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor: reorganize imports in configure_app.js file'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 48

````diff
diff --git a/test/spec.html b/test/spec.html <div id="div1">div tag sample <span class="inner">stuff</span></div>
<div id="bs-console"></div>
-<script type="text/javascript">// <![CDATA[
+<script type="text/javascript">
var loader_development = function(){
- document.write("<script type='module' src='../src/main-browser.js'><\/script>" +
+ document.write("<script type='text/javascript' src='../src/deps/jquery.js'><\/script>" +
+ "<script type='module' src='../src/main-browser.js'><\/script>" +
"<script type='module'>"+
"if(console) console.log('BiwaScheme '+BiwaScheme.VERSION);" +
"RegisterBiwaSchemeTests();" +
@@ -47,8 +48,7 @@ switch(location.hash){
if(console) console.log("starting tests for src/*.js");
loader_development();
}
-
-// ]]></script>
+</script>
</body>
</html>
<!-- vim:set ft=javascript: -->
````

1: 'test(spec): update script loading logic in spec.html'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'add jquery.js to dev server'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 49

````diff
diff --git a/src/common/app/configure_root.jsx b/src/common/app/configure_root.jsx @@ -10,6 +10,7 @@ import Root from 'components/parts/Root'
import 'styles/global'
type Props = {
+ i18n: Object,
store: Object, // unconfigured store
SSR: {
// SSR options, see `/server` for more info
@@ -24,9 +25,9 @@ type Props = {
* Configure Root component.
*/
-const configureRootComponent = ({store, SSR, history, routes}: Props) => {
- const props = {store, SSR, history, routes}
+const configureRootComponent = (props: Props) => {
if (module.hot) {
+ const {store} = props
// Enable Webpack hot module replacement for reducers
module.hot.accept('reducers', () => {
const nextRootReducer = require('reducers').default
````

1: 'fix: fix root component'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'refactor(app): Simplify configureRootComponent function and enable hot module replacement for reducers'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

## Item 50

````diff
diff --git a/website/pages/deployment-options/azure.md b/website/pages/deployment-options/azure.md [Install the Azure CLI](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli)
+Add razzle config
+
+```js
+// razzle.config.js
+'use strict';
+
+module.exports = {
+ options: {
+ forceRuntimeEnvVars: ['HOST', 'PORT']
+ }
+};
+```
+
Create web.config
```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
+ web.config
This configuration file is required if iisnode is used to run node processes behind
IIS or IIS Express. For more information, visit:
https://github.com/tjanczuk/iisnode/blob/master/src/samples/configuration/web.config
@@ -66,10 +80,10 @@ Create web.config
</configuration>
```
-Build the Razzle project
+Zip the Razzle project
```bash
-yarn build
+zip -r site.zip * -x "build/*" "node_modules/*"
```
Login to Azure
@@ -87,18 +101,21 @@ webappname=myRazzle$RANDOM
az group create --location westeurope --name myResourceGroup
# Create an App Service plan in `FREE` tier.
-az appservice plan create --name myAppServicePlan --resource-group myResourceGroup --sku FREE
+az appservice plan create --name myAppServicePlan --resource-group myResourceGroup --sku FREE --is-linux
# Create a web app.
-az webapp create --name $webappname --resource-group myResourceGroup --plan myAppServicePlan
+az webapp create --name $webappname --resource-group myResourceGroup --plan myAppServicePlan --runtime "node|12-lts"
+
+# Enable building with zip deploy
+az webapp config appsettings set --name $webappname --resource-group myResourceGroup --settings SCM_DO_BUILD_DURING_DEPLOYMENT=true
# Get FTP publishing profile and query for publish URL and credentials
creds=($(az webapp deployment list-publishing-profiles --name $webappname --resource-group myResourceGroup \
---query "[?contains(publishMethod, 'FTP')].[publishUrl,userName,userPWD]" --output tsv))
+--query "[?contains(publishMethod, 'ZipDeploy')].[publishUrl,userName,userPWD]" --output tsv))
# Use cURL to perform FTP upload. You can use any FTP tool to do this instead.
-curl -T index.html -u ${creds[1]}:${creds[2]} ${creds[0]}/
+curl -X POST -u ${creds[1]}:${creds[2]} --data-binary @"site.zip" https://${creds[0]}/api/zipdeploy
# Copy the result of the following command into a browser to see the static HTML site.
-echo http://$webappname.azurewebsites.net
+echo https://$webappname.azurewebsites.net
```
````

1: 'add razzle config'

Conciseness: 
Expressiveness: 
Informativeness: 

2: 'docs: add razzle config and create web.config for Azure deployment [skip ci]'

Conciseness: 
Expressiveness: 
Informativeness: 

**Best description number:** 

---

